{% load static %}
{% load main_tags %}
{% load wagtailcore_tags %}

{% with main_thematic=resource.get_main_thematic %}
  <a href="{{ resource.link }}" {% if resource.is_download %}download{% else %}target="_blank"{% endif %}>
    <div class="card resource-card footer-at-bottom
              {% if main_thematic %}
                has-background-{{ main_thematic.slug }}-light
              {% else %}
                has-background-std
              {% endif %}">
      <div class="card-content">
        <div>
          <span class="has-text-weight-bold">{{ resource.resource_type }}</span>
        </div>
        <h3 class="title is-5">{{ resource.name }}</h3>
        <div>
          {{ resource.short_description|richtext }}
        </div>
      </div>

      <div class="card-footer" style="flex-direction: column; padding: 24px; border: none;">
        <div>
          {% if resource.source_name %}
            <span>
            <span class="icon"><img src="{% static 'img/source.svg' %}"
                                    style="width: 12px; height: 12px;"></span>
            Source : {{ resource.source_name }}
          </span>
          {% endif %}
        </div>
        {% if resource.geo_dev_creation %}
          <div>
          <span>
            <span class="icon"><img src="{% static 'img/resource_is_progysat.svg' %}"
                                    style="width: 12px; height: 12px;"></span>
            {% trans "Ressource Progysat" %}
          </span>
          </div>
        {% endif %}
        <div class="mt-2">
          <button class="button is-secondary is-medium">
            <span class="icon">
              {% include "components/icon.html" with size="16" name="share-box" %}
            </span>
            <span>{% trans "Accéder à la ressource" %}</span>
          </button>
        </div>
      </div>
    </div>
  </a>
{% endwith %}
